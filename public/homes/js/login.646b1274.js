define("login:static/util/global.validate.js",function(e,a){!function(){var e={bdhmProtocol:"https:"==document.location.protocol?"https://":"http://",reg:{mobile:/^0?1[3|4|5|7|8][0-9]\d{8}$/,email:/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/},_Token:"",keyUpVali:function(e,a){$(a).bind("keyup",function(){(/^0?1[3|4|5|7|8][0-9]\d{8}$/.test($(this).val())||/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test($(this).val()))&&$(e).validate().element(a)})},isformsuccess:function(e){for(var a=!1,o=$(e).find("input.form-control"),t=0;t<o.length;t++)o.eq(t).hasClass("success")||(a=!0);$(e).find('button[type="submit"]').prop("disabled",a)},foucsdeletesign:function(e){$(e).focus(function(){var e=$(this).parent().find(" i ");e.hasClass("fa-times-circle")&&e.hide()}),$(e).blur(function(){var e=$(this).parent().find(" i "),a=$(this).val();e.show(),!e.hasClass("fa-check-circle")||""!=a&&"undedined"!=a||e.hide()})},appValidate:function(){$.validator.setDefaults({onkeyup:!1,focusCleanup:!0,focusInvalid:!1}),$.extend($.validator.messages,{required:"此项必须填写",equalTo:"两次输入的密码不一致",minlength:$.validator.format("最少{0}个字符"),emailmobile:"请填写手机号码"})},pwStrength:function(e,a,o){$(a).keyup(function(){if($(e).validate().element(a),!o){var t=new RegExp("^(?=.{8,})(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*\\W).*$","g"),s=new RegExp("^(?=.{7,})(((?=.*[A-Z])(?=.*[a-z]))|((?=.*[A-Z])(?=.*[0-9]))|((?=.*[a-z])(?=.*[0-9]))).*$","g"),n=new RegExp("(?=.{6,}).*","g");return 0==n.test($(this).val())?($("#level").removeClass("pw-weak"),$("#level").removeClass("pw-medium"),$("#level").removeClass("pw-strong"),$("#level").addClass(" pw-defule")):t.test($(this).val())?($("#level").removeClass("pw-weak"),$("#level").removeClass("pw-medium"),$("#level").removeClass("pw-strong"),$("#level").addClass(" pw-strong")):s.test($(this).val())?($("#level").removeClass("pw-weak"),$("#level").removeClass("pw-medium"),$("#level").removeClass("pw-strong"),$("#level").addClass(" pw-medium")):($("#level").removeClass("pw-weak"),$("#level").removeClass("pw-medium"),$("#level").removeClass("pw-strong"),$("#level").addClass("pw-weak")),!0}})},countdown:function(e){var a,o=5;a=setInterval(function(){--o,$(".text-danger").html(o),0===o&&(clearInterval(a),location.href=e?e:$.searchUrl("redirect")?decodeURIComponent($.searchUrl("redirect")):"http://www.kdnet.net")},1e3)},removeVoiceUpgo:function(a){a?e.reg.mobile.test(a)||$(".c-voice-validate").remove():$(".c-voice-validate").remove()},voiceUpgo:function(a){if(!($(".c-voice-validate").length>0)&&e.reg.mobile.test(a)){var o='<div class="c-voice-validate">收不到？使用 <button type="button" class="upgo">上行验证码</button> </div>';$(".code-group").append(o),$(".c-voice-validate .upgo").click(function(){e.showUpGoBox(a)})}},showUpGoBox_time:!1,ShowUpGoBox_data:{one:!0,show:function(e){function a(e){var a="";for(var o in e)a+='<br><span class="cur">'+e[o].name+'</span> 发送到 <span class="cur">'+e[o].num+"</span> ";return a}var o='<div class="upgo-box"><div class="con">编辑手机短信 <span class="cur">'+e.data.code+'</span> <span class="gray">(15分钟内有效)</span>'+a(e.data.sp_code)+'完成验证</div><p class="gray">(仅需支付运营商收取的标准短信资费，无需支付额外费用。)</p></div>';layer.open({type:1,skin:"upgo-style",content:o,area:"auto",shade:.3,maxWidth:"444px",title:!1,btn:["我知道了"],btn1:function(){}})}},showUpGoBox:function(a){e.ShowUpGoBox_data.one?$.ajax({url:"http://i.kdnet.net/resource/validate/inittxsms",type:"GET",data:{mobile:a,channel:"login"},success:function(o){if(o.success){e.ShowUpGoBox_data.one=!1,e.ShowUpGoBox_data.json=o,e.ShowUpGoBox_data.show(o),e.showUpGoBox_time&&clearInterval(e.showUpGoBox_time);var t=0;e.showUpGoBox_time=setInterval(function(){t++,$.ajax({url:"http://i.kdnet.net/resource/validate/checksms",type:"GET",data:{token:o.data.token,code:o.data.code,mobile:a},success:function(a){if(a.success&&a.data.status){clearInterval(e.showUpGoBox_time),layer.closeAll(),$CONFIG.LOGININIT._Token=a.data.token;var o='<div class="code-group-upgo">此手机号码已经成功验证</div>';$(".code-group").hide(),$(".code-group").before(o)}}})},2e3)}else layer.msg('<i class="fa fa-close text-danger"></i> '+o.message,{time:5e3})}}):e.ShowUpGoBox_data.show(e.ShowUpGoBox_data.json)},appCleanInputData:function(){$(".form-group").append('<i class="fa fa-times disNone"></i>'),$(".form-group input").keyup(function(){var e=$(this).parent();$(this).val()&&$(this).is(":focus")?e.find("i.fa").show():e.find("i.fa").hide()}),$(document).on("click",".form-group i.fa",function(){var e=$(this).parent().find("input");e.val(""),e.focus()})}};$CONFIG.LOGININIT=e,a.init=e}(this)});
;define("login:static/util/app/app-bing.js",function(e,t){e("common:static/util/kdnet.api.js");var n=e("login:static/util/global.validate.js").init;t.init=function(e,t){var a,i=!1,s=null,o=!1;a=$(".formBindEmail").length>0?"email":"phone",$(".formBindPc").length>0&&(o=!0),_idToken=null,$.validator.setDefaults({onkeyup:!1,focusCleanup:!0,focusInvalid:!1}),$.extend($.validator.messages,{required:"此项必须填写",minlength:$.validator.format("最少{0}个字符"),email:"请填写正确的邮箱地址",mobile:"请填写正确的手机号码"});var r="https:"==document.location.protocol?"https://":"http://";n.keyUpVali("#formBind","#inputEmailPhone");var l={required:!0,minlength:2,remote:{url:r+"i.kdnet.net/api/passport/query",jsonp:"kpjkey",dataType:"jsonp",data:{id:function(){return $("#inputEmailPhone").val()}},before:function(){"phone"==a?$(".j-verify-btn").html('<i class="fa fa-spinner fa-spin"></i> 手机号码验证中…').prop("disabled",!0):"email"==a&&$(".j-verify-btn").html('<i class="fa fa-spinner fa-spin"></i> 邮箱地址验证中…').prop("disabled",!0)},response:function(e){e.success?(i=!0,$CONFIG.geevalidate(),$(".j-verify-btn").html("获取验证码").prop("disabled",!1)):(i=!1,"phone"==a?$(".j-verify-btn").html("请先验证手机").prop("disabled",!0):"email"==a&&$(".j-verify-btn").html("请先验证邮箱").prop("disabled",!0))}}};"phone"==a?l.mobile=!0:"email"==a&&(l.email=!0),$("#formBind").validate({rules:{inputEmailPhone:l,inputAuthcode:{required:!0,minlength:4,remote:{url:r+"i.kdnet.net/api/passport/examine",dataType:"jsonp",jsonp:"kpjkey",data:{id:function(){return $("#inputEmailPhone").val()},token:function(){return _idToken},txt:function(){return $("#inputAuthcode").val()}},response:function(e){s=e.message?e.data.token:null}}}},errorPlacement:function(e,t){if(o){var a=($(t).parent(),$(t).parent().find("i"));$('<span class="help-block"></div>').insertAfter($(t)).append(e),a.removeClass("fa fa-check-circle form-control-feedback").addClass("fa fa-times-circle form-control-feedback")}else{var i=$(".errorMsg");i.html(e)}$(t).removeClass("success"),n.isformsuccess("#formBind")},success:function(e,t){if(o){var a=($(t).parent(),$(t).parent().find("i"));a.removeClass("fa fa-times-circle form-control-feedback").addClass("fa fa-check-circle form-control-feedback"),$(t).next("span").remove("span")}else $(".errorMsg").empty();$(t).addClass("success"),n.isformsuccess("#formBind")},submitHandler:function(e){var i,l="",c="",p=$("#inputEmailPhone"),d=$("#inputAuthcode").val();(n.reg.mobile.test(p.val())||n.reg.email.test(p.val()))&&("phone"==a?(c=p.val(),i={kdaccesstoken:$.cookie("kdaccesstoken"),mobile:c,mukey:s,m_txt:d,phrase:"",from:"passport",redirect:t}):(l=p.val(),i={kdaccesstoken:$.cookie("kdaccesstoken"),email:l,eukey:s,e_txt:d,phrase:"",from:"passport",redirect:t})),$.KDApi({dataType:"jsonp",jsonp:"kpjkey",url:r+"i.kdnet.net/api/passport/modify",data:i,content:{before:function(){$(e.submit).button("loading")},success:function(t){t.success?o?(layer.msg("保存成功！",{time:1e3},function(){location.reload()}),$(e.submit).button("reset")):(layer.msg(t.message),$(e.submit).button("reset"),document.location.href="action:finish"):(layer.msg(t.message),$CONFIG.sendVerifyCode(!1),$(e.submit).button("reset"))}}})}})}});
;define("login:static/util/app/app-register.js",function(e,n){e("common:static/util/kdnet.api.js");var t=e("common:static/util/md5.js").md5,i=e("login:static/util/global.validate.js").init;n.init=function(e,n){_idToken=null;var s=!1,a=null,o=i.bdhmProtocol;i.keyUpVali("#formRegister","#inputEmailPhone"),i.appValidate(),i.appCleanInputData(),$("#formRegister").validate({rules:{inputEmailPhone:{required:!0,minlength:2,mobile:!0,remote:{url:o+"i.kdnet.net/api/passport/query",jsonp:"kpjkey",dataType:"jsonp",data:{id:function(){return $("#inputEmailPhone").val()}},before:function(){$(".j-verify-btn").html('<i class="fa fa-spinner fa-spin"></i> 手机号码验证中…').prop("disabled",!0)},response:function(e){e.success?(s=!0,$CONFIG.geevalidate(),$(".j-verify-btn").html("获取验证码").prop("disabled",!1)):(s=!1,$(".j-verify-btn").html("请先验证手机号").prop("disabled",!0))}}},inputAuthcode:{required:!0,remote:{url:o+"i.kdnet.net/api/passport/examine",dataType:"jsonp",jsonp:"kpjkey",data:{id:function(){return $("#inputEmailPhone").val()},token:function(){return _idToken},txt:function(){return $("#inputAuthcode").val()}},response:function(e){a=e.message?e.data.token:null}}},inputNickname:{required:!0,minlength:4,nickCheck:!0,remote:{url:o+"i.kdnet.net/api/passport/query",dataType:"jsonp",jsonp:"kpjkey",data:{id:function(){return $("#inputNickname").val()}},response:function(e){s=e.success?!0:!1}}},inputPassword:{required:!0,minlength:8,pwdCheck:!0}},errorPlacement:function(e,n){var t=$(".errorMsg");t.html(e),$(n).removeClass("success"),i.isformsuccess("#formRegister")},success:function(e,n){$(".errorMsg").empty(),$(n).addClass("success"),i.isformsuccess("#formRegister")},submitHandler:function(e){var i="",s=$("#inputEmailPhone").val(),r=$("#inputNickname"),u=$("#inputPassword"),p={username:r.val(),passwd:t(u.val()),email:i,mobile:s,token:a,phrase:"",from:"passport",redirect:n};$.KDApi({dataType:"jsonp",jsonp:"kpjkey",url:o+"i.kdnet.net/api/passport/register",data:p,content:{before:function(){$(e.submit).button("loading")},success:function(n){n.success?($.cookie("kdaccesstoken",n.data.token,{expires:365,path:"/",domain:".kdnet.net"}),layer.msg("注册成功，请重新登录"),setTimeout(function(){document.location.href="action:finish"},3e3)):(layer.msg(n.message),$CONFIG.sendVerifyCode(!1),$(e.submit).button("reset"))}}})},messages:{inputEmailPhone:{required:"请输入常用中国大陆手机号",mobile:"请填写正确的手机号",remote:"帐号已经存在"},inputAuthcode:{required:"请输入验证码"},inputNickname:{required:"请输入凯迪昵称",minlength:"请填写4到16位字符"},inputPassword:{minlength:"请输入8-20位密码",pwdCheck:"大写字母、小写字母、数字和标点符号至少包含2种"}}})}});
;define("login:static/util/app/app-repassword.js",function(s,e){s("common:static/util/kdnet.api.js");var r=s("common:static/util/md5.js").md5,t=s("login:static/util/global.validate.js").init;e.init=function(){_idToken=null;var s=null,e=t.bdhmProtocol;t.keyUpVali("#formPassword01","#inputEmailPhone"),t.pwStrength("#formPassword02","#inputPassword",!0),$.extend($.validator.messages,{required:"此项必须填写",equalTo:"两次输入的密码不一致",minlength:$.validator.format("最少{0}个字符")}),$.validator.setDefaults({onkeyup:!1,focusCleanup:!0,focusInvalid:!1,errorPlacement:function(s,e){var r=$(".errorMsg");r.html(s),$(e).removeClass("success")},success:function(s,e){$(".errorMsg").empty(),$(e).addClass("success")}}),$("#formPassword01").validate({rules:{inputEmailPhone:{required:!0,mobile:!0,minlength:4,remote:{url:e+"i.kdnet.net/api/passport/has",jsonp:"kpjkey",dataType:"jsonp",data:{id:function(){return $("#inputEmailPhone").val()}},before:function(){$(".j-verify-btn").html('<i class="fa fa-spinner fa-spin"></i> 手机号码验证中…').prop("disabled",!0)},response:function(s){s.success?(IDIsPass=!0,$CONFIG.geevalidate(),$(".j-verify-btn").html("获取验证码").prop("disabled",!1)):(IDIsPass=!1,$(".j-verify-btn").html("请先验证手机/邮箱").prop("disabled",!0))}}},inputAuthcode:{required:!0,remote:{url:e+"i.kdnet.net/api/passport/examine",dataType:"jsonp",jsonp:"kpjkey",data:{id:function(){return $("#inputEmailPhone").val()},token:function(){return _idToken},txt:function(){return $("#inputAuthcode").val()}},response:function(e){s=e.message?e.data.token:null}}}},errorPlacement:function(s,e){var r=$(".errorMsg");r.html(s),$(e).removeClass("success"),t.isformsuccess("#formPassword01")},success:function(s,e){$(".errorMsg").empty(),$(e).addClass("success"),t.isformsuccess("#formPassword01")},submitHandler:function(){$("#formPassword01").hide(),$("#formPassword02").show(),$(".app-login-wrap .titsay").text("重新设置一个登录密码")},messages:{inputEmailPhone:{required:"请输入中国大陆手机",mobile:"请填写正确的手机号",emailmobile:"请填写正确的手机号",remote:"帐号已经存在"},inputAuthcode:{required:"请输入验证码"}}}),$("#formPassword02").validate({rules:{inputPassword:{required:!0,minlength:8,pwdCheck:!0},confirmPassword:{required:!0,minlength:8,equalTo:"#inputPassword"}},errorPlacement:function(s,e){var r=$(".errorMsg");r.html(s),$(e).removeClass("success"),t.isformsuccess("#formPassword02")},success:function(s,e){$(".errorMsg").empty(),$(e).addClass("success"),t.isformsuccess("#formPassword02")},submitHandler:function(){var e=this;$.KDApi({type:"POST",url:"http://i.kdnet.net/api/passport/reset",data:{passwd:r($("#inputPassword").val()),id:$("#inputEmailPhone").val(),token:s},content:{success:function(s){s.success?layer.msg("修改成功！"):e.showErrors({res_submit:s.message})}}})},messages:{inputPassword:{required:"请输入8-20位密码",minlength:"请输入8-20位密码",pwdCheck:"大写字母、小写字母、数字和标点符号至少包含2种"},confirmPassword:{required:"请输入8-20位密码",minlength:"请输入8-20位密码"}}})}});
;define("login:static/util/bind.validate.js",function(e,n){e("common:static/util/kdnet.api.js");var i=e("login:static/util/global.validate.js").init;n.init=function(){function e(){i.keyUpVali("#formBinding","#inputEmailPhone"),i.pwStrength("#formBinding","#inputPassword"),i.foucsdeletesign(".form-control"),$.validator.setDefaults({onkeyup:!1,focusCleanup:!0,errorPlacement:function(e,n){var t=$(n).parent(),o=t.find("i");$(n).after(e),o.show().removeClass("fa fa-check-circle form-control-feedback").addClass("fa fa-times-circle form-control-feedback"),"inputEmailPhone"==$(n).attr("id")&&i.removeVoiceUpgo()},success:function(e,n){var i=$(n).parent(),t=i.find("i");t.show().removeClass("fa fa-times-circle form-control-feedback").addClass("fa fa-check-circle form-control-feedback")}}),$.extend($.validator.messages,{required:"此项必须填写",equalTo:"两次输入的密码不一致",minlength:$.validator.format("最少{0}个字符"),emailmobile:"请填写手机号码或邮箱",mobile:"请填写手机号码"})}function n(){$("#formBinding").validate({rules:{inputEmailPhone:{required:!0,mobile:!0,remote:{url:o+"i.kdnet.net/api/passport/query",jsonp:"kpjkey",dataType:"jsonp",data:{id:function(){return $("#inputEmailPhone").val()}},before:function(){$(".j-verify-btn").html('<i class="fa fa-spinner fa-spin"></i> 手机号码验证中…').prop("disabled",!0)},response:function(e){e.success?(IDIsPass=!0,$CONFIG.geevalidate(),$(".j-verify-btn").html("获取验证码").prop("disabled",!1),i.removeVoiceUpgo($("#inputEmailPhone").val())):(IDIsPass=!1,$(".j-verify-btn").html("请先验证手机").prop("disabled",!0),i.removeVoiceUpgo())}}},inputAuthcode:{required:!0,minlength:4,remote:{url:o+"i.kdnet.net/api/passport/examine",dataType:"jsonp",jsonp:"kpjkey",data:{id:function(){return $("#inputEmailPhone").val()},token:function(){return _idToken},txt:function(){return $("#inputAuthcode").val()}},response:function(e){$CONFIG.LOGININIT._Token=e.success?e.data.token:null}}}},submitHandler:function(e){var n={id:$("#inputEmailPhone").val(),token:$CONFIG.LOGININIT._Token,kdbindtoken:$.cookie("kdbindtoken")};return console.log(n),$.ajax({dataType:"jsonp",jsonp:"kpjkey",url:o+"i.kdnet.net/api/passport/forcebind",data:n,success:function(n){n.success?(layer.msg("绑定成功"),setTimeout(function(){if(location.search)var e=location.search;else var e="";location.href="/account/bsucess"+e},3e3)):(layer.msg(n.message),$(e.submit).button("reset"))}}),!1},messages:{inputEmailPhone:{required:"请输入中国大陆手机",mobile:"请填写正确的手机号"},inputAuthcode:{required:"请输入验证码"}}})}function t(){$("#formBinding").validate({rules:{inputEmailPhone:{required:!0,mobile:!0,remote:{url:o+"i.kdnet.net/api/passport/query",jsonp:"kpjkey",dataType:"jsonp",data:{id:function(){return $("#inputEmailPhone").val()}},before:function(){$(".j-verify-btn").html('<i class="fa fa-spinner fa-spin"></i> 手机号码验证中…').prop("disabled",!0)},response:function(e){e.success?(IDIsPass=!0,$CONFIG.geevalidate(),$(".j-verify-btn").html("获取验证码").prop("disabled",!1),i.removeVoiceUpgo($("#inputEmailPhone").val())):(IDIsPass=!1,$(".j-verify-btn").html("请先验证手机号").prop("disabled",!0),i.removeVoiceUpgo())}}},inputAuthcode:{required:!0,minlength:4,remote:{url:o+"i.kdnet.net/api/passport/examine",dataType:"jsonp",jsonp:"kpjkey",data:{id:function(){return $("#inputEmailPhone").val()},token:function(){return _idToken},txt:function(){return $("#inputAuthcode").val()}},response:function(e){$CONFIG.LOGININIT._Token=e.success?e.data.token:null}}}},submitHandler:function(e){var n={mobile:$("#inputEmailPhone").val(),mukey:$CONFIG.LOGININIT._Token,kdaccesstoken:$.cookie("kdaccesstoken"),m_txt:$("#inputAuthcode").val(),phrase:"",from:"passport"};return console.log(n),$.ajax({dataType:"jsonp",jsonp:"kpjkey",url:o+"i.kdnet.net/api/passport/modify",data:n,success:function(n){n.success?location.href="/user/club/bindphone2":(layer.msg(n.message),$(e.submit).button("reset"))}}),!1},messages:{inputEmailPhone:{required:"请输入中国大陆手机",mobile:"请填写正确的手机号"},inputAuthcode:{required:"请输入验证码"}}})}_idToken=null;var o=i.bdhmProtocol;$("#binding_p1").length>0?(e(),n()):$("#bind_old_p1").length>0?(e(),t()):$("#bind_old_p2").length>0?i.countdown("/user/club/bindphone1"):i.countdown()}});
;define("login:static/util/code.validate.js",function(){!function(e,t){function a(){return"undefined"==typeof _inputPhone?$("#inputEmailPhone").val():$(_inputPhone).val()}function n(e,t,a){console.log(a);var n,o;"upgo"==a?setTimeout(function(){$CONFIG.LOGININIT.showUpGoBox(e)},1e3):(a?(n='<i class="fa fa-check-circle text-success"></i> 电话拨打中…请留意来电。',o="rxsms/?type=vod"):(n='<i class="fa fa-check-circle text-success"></i> 验证码已发送给 '+e+" ，请在15分钟内完成验证。",o="sendcode"),$.ajax({url:"http://i.kdnet.net//resource/validate/"+o,type:"GET",data:{id:e,token:t},success:function(t){t.success?(_idToken=t.data.token,$CONFIG.sendVerifyCode(e,a),layer.msg(n,{time:5e3})):layer.msg('<i class="fa fa-close text-danger"></i> '+t.message,{time:5e3})}}))}function o(){$.KDApi({url:d+"i.kdnet.net/api/passport/captcha",dataType:"jsonp",jsonp:"kpjkey",data:{},content:{before:function(){""!=$("#Authcode1").val("")&&$("#Authcode1").val("")},success:function(e){e.success?$(".captcha-img").prop("src",e.data.data):layer.msg(e.message)}}})}var i,s,c=!0,l=!1,d="https:"==document.location.protocol?"https://":"http://";if("gee"==e)var p=!0;else if("img"==e)var r=!0;s=$(".app-login-wrap").length>0?"app":"pc";var u;$CONFIG.geevalidate=function(t){if(u=t,"gee"==e&&p){p=!1;var o=function(e){e.onSuccess(function(){var t=e.getValidate();$.ajax({url:"http://i.kdnet.net/resource/validate/geetest",type:"get",dataType:"jsonp",jsonp:"kdjspnp",data:{type:"pc",id:a(),geetest_challenge:t.geetest_challenge,geetest_validate:t.geetest_validate,geetest_seccode:t.geetest_seccode},success:function(e){"function"==typeof u?u():n(a(),e.data.token,u)}})}),$(".j-verify-btn").click(function(){e.show()}),e.appendTo("#verifyModal-body"),$(".j-verify-btn")};$.ajax({url:"http://i.kdnet.net/resource/geeinit.json?t="+(new Date).getTime(),type:"get",dataType:"jsonp",jsonp:"kdjspnp",success:function(e){initGeetest({gt:e.gt,challenge:e.challenge,product:"popup",offline:!e.success},o)}})}},$CONFIG.sendVerifyCode=function(e,t){console.log(e,t,111);var a=$(".j-verify-btn");if(arguments[0]===!1)clearInterval(i),a.prop("disabled",!1),a.html("发送验证码");else{var n=60;c=!1,a.prop("disabled",!0),t&&$(".c-voice-validate ."+t).prop("disabled",!0),i=setInterval(function(){--n,a.html("重新发送("+n+")"),$("#inputEmailPhone").prop("disabled",!0),0==n&&(clearInterval(i),c=!0,a.html("重新发送"),a.prop("disabled",!1),$("#inputEmailPhone").prop("disabled",!1),t&&$(".c-voice-validate ."+t).prop("disabled",!1),$CONFIG.LOGININIT.voiceUpgo(e))},1e3)}},$(document).on("click",".captcha-img",function(){o()}),$(document).on("focus","#Authcode1",function(){$(this).parent().removeClass("has-error"),$(this).siblings(".captcha-error").html("")}),"img"==e&&$(".j-verify-btn").click(function(){if(!$(this).prop("disabled")){if($("#verifyModal").modal("show"),r){r=!1;var e='<div class="captcha-item"><img src="" class="captcha-img"><div class="form-group auth-code"><label class="sr-only" for="Authcode1">验证码</label><input type="text" class="form-control" id="Authcode1" name="Authcode1" placeholder="验证码"><b class="captcha-error"></b></div></div><button type="button" class="btn btn-default j-captcha-btn">确定</button>';$("#verifyModal .modal-body").append(e)}o()}}),$(document).on("click",".j-captcha-btn",function(){id="undefined"==typeof $(this).attr("elementId")?$("#inputEmailPhone").val():$($(this).attr("elementId")).val(),code=$("#Authcode1").val(),$.KDApi({url:d+"i.kdnet.net/api/passport/sendCode",dataType:"jsonp",asyncLock:!1,jsonp:"kpjkey",data:{id:id,code:code},content:{success:function(e){e.success?($CONFIG.sendVerifyCode(),$("#verifyModal").modal("hide"),_idToken=e.data.token,/^0?1[3|4|5|7|8][0-9]\d{8}$/.test($("#inputEmailPhone").val())?layer.msg(t,{time:3e3}):layer.msg("验证码已发送给您的邮箱！",{time:3e3})):(_idToken=null,o(),$(".auth-code").addClass("has-error"),$(".captcha-error").html(e.message))}}})}),$("#inputEmailPhone").blur(function(){if(c){if("app"==s)var e="请先验证手机号";else if("pc"==s)var e="请先验证账号";$(this).hasClass("error")||""==$(this).val()||null==$(this).val()?(l=!1,$(".j-verify-btn").html(e).prop("disabled",!0)):(l=!0,$(".j-verify-btn").html("发送验证码").prop("disabled",!1))}})}("gee","已发验证码，请接收短信！")});
;define("login:static/util/complain.validate.js",function(e,a){var i=e("login:static/util/global.validate.js").init;a.init=function(){i.appValidate(),i.foucsdeletesign(".form-control");var e=new Object;$.validator.setDefaults({errorPlacement:function(e,a){var i=$(a).parent(),n=i.find("i");i.append(e),n.show().removeClass("fa fa-check-circle form-control-feedback").addClass("fa fa-times-circle form-control-feedback")},success:function(e,a){var i=$(a).parent(),n=i.find("i");n.show().removeClass("fa fa-times-circle form-control-feedback").addClass("fa fa-check-circle form-control-feedback")}}),jQuery.validator.addMethod("idcard",function(e,a){var i=/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/;return this.optional(a)||i.test(e)},"请输入18位二代身份证号"),$("#complain-2").validate({rules:{inputNickname:{required:!0,minlength:2},inputPhone:{required:!0,mobile:!0},inputIdCardName:{required:!0,minlength:2},inputIdCardNo:{required:!0,idcard:!0},inputIdCardImg1:{required:!0},inputIdCardImg2:{required:!0}},submitHandler:function(a){var i={username:$("#inputNickname").val(),mobile:$("#inputPhone").val(),idname:$("#inputIdCardName").val(),idnum:$("#inputIdCardNo").val(),id_pic:e.id_pic,hand_pic:e.hand_pic};return $("#inputEmail").val()&&(i.regemail=$("#inputEmail").val()),$("#inputMobile").val()&&(i.regmobile=$("#inputMobile").val()),$("#inputMore").val()&&(i.moreinfo=$("#inputMore").val()),$.ajax({url:"http://i.kdnet.net/api/passport/appeal",data:i,success:function(e){e.success?($(a)[0].reset(),location.href="/account/appeal3"):layer.msg(e.message)}}),!1},messages:{inputNickname:{required:"请输入凯迪昵称",minlength:"请填写2位及以上字符"},inputPhone:{required:"请输入中国大陆手机",mobile:"请填写正确的手机号"},inputIdCardName:{required:"请输入身份证名",minlength:"请输入两位身份证名"},inputIdCardNo:{required:"请输入二代身份证"},inputIdCardImg1:{required:"请上传身份证照片"},inputIdCardImg2:{required:"请上传本人手持身份证照片"}}}),$("#complain-2 .form-group").each(function(e){6>e&&$(this).append("<s>*</s>")});var a='<b class="fa fa-spinner fa-spin"></b>',n=WebUploader.create({auto:!0,swf:"Uploader.swf",server:"/upload/image/image",pick:"#IdCardImg1",accept:{title:"Images",extensions:"gif,jpg,jpeg,bmp,png",mimeTypes:"image/*"}});n.on("uploadProgress",function(){var e=$("#inputIdCardImg1").parent();e.find(".fa-spinner").length>0||e.append(a)}),n.on("uploadSuccess",function(a,i){$("#inputIdCardImg1").val("身份证照片"),$("#complain-2").validate().element("#inputIdCardImg1"),e.id_pic=i.data.url}),n.on("uploadError",function(){layer.msg("上传失败！")}),n.on("uploadComplete",function(){$("#inputIdCardImg1").parent().find(".fa-spinner").remove()});var r=WebUploader.create({auto:!0,swf:"Uploader.swf",server:"/upload/image/image",pick:"#IdCardImg2",accept:{title:"Images",extensions:"gif,jpg,jpeg,bmp,png",mimeTypes:"image/*"}});r.on("uploadProgress",function(){var e=$("#inputIdCardImg2").parent();e.find(".fa-spinner").length>0||e.append(a)}),r.on("uploadSuccess",function(a,i){$("#inputIdCardImg2").val("本人手持身份证照片"),$("#complain-2").validate().element("#inputIdCardImg2"),e.hand_pic=i.data.url}),r.on("uploadError",function(){layer.msg("上传失败！")}),r.on("uploadComplete",function(){$("#inputIdCardImg2").parent().find(".fa-spinner").remove()})}});
;define("login:static/util/connections.js",function(e,a){e("common:static/util/kdnet.api.js");{var s=e("common:static/util/md5.js").md5;e("common:static/util/sprintf.js").sprintf}a.init=function(e){$.validator.setDefaults({onkeyup:!1,focusCleanup:!0}),$.extend($.validator.messages,{required:"此项必须填写",equalTo:"两次密码不一致",minlength:$.validator.format("最少{0}个字符"),emailmobile:"请输入有效的邮箱/手机号码"}),$("#formUser").validate({rules:{inputEmailPhone3:{required:!0},inputPassword3:{required:!0}},errorPlacement:function(e,a){var s=$(a).parent(),t=($(a).parent().find("input"),$(a).parent().find("i"));s.removeClass("has-success has-feedback").addClass("has-error has-feedback"),t.removeClass("fa fa-check-circle form-control-feedback").addClass("fa fa-times-circle form-control-feedback")},success:function(e,a){var s=$(a).parent(),t=($(a).parent().find("input"),$(a).parent().find("i"));s.removeClass("has-error has-feedback").addClass("has-success has-feedback"),t.removeClass("fa fa-times-circle form-control-feedback").addClass("fa fa-check-circle form-control-feedback")},submitHandler:function(){$.KDApi({url:"http://i.kdnet.net/api/passport/authorize",type:"post",asyncLock:!1,data:{username:$("#inputEmailPhone3").val(),passwd:s($("#inputPassword3").val())},content:{before:function(){},success:function(a){if(a.success){var s=a.data.token;$.KDApi({url:"http://i.kdnet.net/api/passport/platform",type:"get",data:{oauthid:e.oauthid,platform:e.platform,access_token:e.access_token,from:e.from,kdppck:s},content:{success:function(a){a.success&&($.cookie("kdaccesstoken",s,{expires:31536e3,path:"/",domain:"kdnet.net"}),window.location.href=e.redirect)}}})}else layer.msg(a.message)}}})}}),$("#formPassword").validate({rules:{inputNickname:{required:!0},inputPassword:{required:!0,minlength:6},confirmPassword:{required:!0,minlength:6,equalTo:"#inputPassword"}},errorPlacement:function(e,a){var s=$(a).parent(),t=($(a).parent().find("input"),$(a).parent().find("i"));s.removeClass("has-success has-feedback").addClass("has-error has-feedback"),t.removeClass("fa fa-check-circle form-control-feedback").addClass("fa fa-times-circle form-control-feedback")},success:function(e,a){var s=$(a).parent(),t=($(a).parent().find("input"),$(a).parent().find("i"));s.removeClass("has-error has-feedback").addClass("has-success has-feedback"),t.removeClass("fa fa-times-circle form-control-feedback").addClass("fa fa-check-circle form-control-feedback")},submitHandler:function(){$.KDApi({url:"http://i.kdnet.net/api/passport/platform",data:{username:$("#inputNickname").val(),oauthid:e.oauthid,platform:e.platform,access_token:e.access_token,from:e.from,passwd:$("#inputPassword").val()},asyncLock:!1,content:{before:function(){},success:function(a){if(a.success){var s=a.data.token;$.KDApi({url:"http://i.kdnet.net/api/passport/status",type:"get",data:{kdaccesstoken:s},content:{success:function(){$.cookie("kdaccesstoken",s,{expires:31536e3,path:"/",domain:"kdnet.net"}),window.location.href=e.redirect}}})}else layer.msg(a.message)}}})}}),$("#loginbtn").on("click",function(){$.KDApi({url:"http://i.kdnet.net/api/passport/platform",data:{username:e.username,oauthid:e.oauthid,platform:e.platform,access_token:e.access_token,from:e.from},asyncLock:!1,content:{before:function(){},success:function(a){if(a.success){var s=a.data.token;$.KDApi({url:"http://i.kdnet.net/api/passport/status",type:"get",data:{kdaccesstoken:s},content:{success:function(){$.cookie("kdaccesstoken",s,{expires:31536e3,path:"/",domain:"kdnet.net"}),window.location.href=e.redirect}}})}else layer.msg(a.message)}}})})}});
;define("login:static/util/login.sweep.js",function(e){e("common:static/util/kdnet.api.js"),$(function(){function e(){$.KDApi({type:"GET",url:c+"/api/scan/setqr",content:{success:function(e){e.success?($(".sweep-box .pic img").eq(0).show().attr("src",e.data.img),n=e.data.key,t()):layer.msg(e.message)}}})}function t(){var e=90,t=!1;o=setInterval(function(){$.KDApi({type:"GET",url:c+"/api/scan/check?key="+n,content:{success:function(n){if(n.success){if(console.log(e),0==e)return clearInterval(o),$(".sweep-box .error-con").show(),void(i=!1);e--,201200==n.code?t||(console.log(n.data),$(".sweep-box .step").eq(1).find(".avatar img").attr("src",n.data.user.img),$(".sweep-box .step").hide().eq(1).show(),t=!0):201300==n.code&&(console.log(n),$.cookie("kdaccesstoken",n.data.token,{expires:365,path:"/",domain:".kdnet.net"}),clearInterval(o),location.href="http://clubdev.test.kdnet.net")}else clearInterval(o),layer.msg("刷新失败")},error:function(){clearInterval(o)}}})},2e3)}var n,o,s=300,i=!0,c="http://aapi.test.kdnet.net";$(".sweep-ioinc img").on("click",function(){var t=$(this).index();$(this).hide().siblings().show(),0==t?($(".sweep-box").show(),$(".kdnet-login .tab-content").hide(),e()):1==t&&($(".sweep-box").hide(),$(".kdnet-login .tab-content").show(),clearInterval(o))}),$(".sweep-box .pic").hover(function(){i&&$(".sweep-box .pic img").fadeOut(s).eq(1).fadeIn(s)},function(){i&&$(".sweep-box .pic img").fadeOut(s).eq(0).fadeIn(s)}),$(".sweep-box .error .btn").on("click",function(){$(".sweep-box .error-con").hide(),i=!0,e()})})});
;define("login:static/util/login.validate.js",function(e,n){e("common:static/util/kdnet.api.js");var t=e("common:static/util/md5.js").md5,o=e("login:static/util/global.validate.js").init;n.init=function(e,n){function i(e,n){$.ajax({type:"GET",url:"http://club.kdnet.net/payread/index.php?s=Api/synlogin&token="+e,dataType:"jsonp",success:function(){setTimeout(function(){window.location.href=n},200)}})}function a(){clearInterval(u),$(".sweep-box .error-con").hide(),m=!0,$(".sweep-box .step").hide().eq(0).show(),s()}function s(){$.ajax({type:"GET",url:h+"/api/scan/setqr?time="+(new Date).getTime(),success:function(e){e.success?($(".sweep-box .pic img").hide().eq(0).show().attr("src",e.data.img),p=e.data.key,r()):($(".sweep-box .error-con").show(),m=!1)},error:function(){$(".sweep-box .error-con").show(),m=!1}})}function r(){var e=90,t=!1;u=setInterval(function(){$.KDApi({type:"GET",url:h+"/api/scan/check?key="+p,content:{success:function(o){if(o.success){if(0==e)return clearInterval(u),$(".sweep-box .error-con").show(),void(m=!1);e--,201200==o.code?t||(console.log(o.data),$(".sweep-box .step").eq(1).find(".avatar img").attr("src",o.data.user.avatar),$(".sweep-box .step").hide().eq(1).show(),t=!0):201300==o.code?($.cookie("kdaccesstoken",o.data.token,{expires:365,path:"/",domain:".kdnet.net"}),clearInterval(u),""!=n?(console.log(decodeURIComponent(n)),location.href=n):location.href="http://kdnet.net"):201400==o.code&&a()}else clearInterval(u)},error:function(){clearInterval(u),layer.msg("刷新失败")}}})},2e3)}_idToken=null;var c=!1,l=0,d=o.bdhmProtocol;o.appValidate(),o.keyUpVali("#formRegister","#inputEmailPhone"),o.pwStrength("#formRegister","#inputPassword"),o.foucsdeletesign(".form-control"),$("#inputEmailPhone").emailautocomplete(),$("#formLogin").validate({rules:{EmailPhoneNcke:{required:!0,minlength:2},Password:{required:!0,minlength:6}},errorPlacement:function(e,n){var t=($(n).parent(),$(n).parent().find("i"));$(n).parent().after(e),t.show().removeClass("fa fa-check-circle form-control-feedback").addClass("fa fa-times-circle form-control-feedback")},success:function(e,n){var t=($(n).parent(),$(n).parent().find("i"));t.show().removeClass("fa fa-times-circle form-control-feedback").addClass("fa fa-check-circle form-control-feedback"),$(".login-pwd .explain").length>0&&($(".login-pwd .explain").hasClass("mustshow")||$(".login-pwd .explain").remove())},submitHandler:function(o){if(3==l)return void $(".j-verify-btn").click();var a={username:$("#EmailPhoneNcke").val(),passwd:t($("#Password").val()),phrase:$("#Authcode").val(),redirect:n};$.KDApi({dataType:"jsonp",jsonp:"kpjkey",url:d+e.authorize.uri,data:a,content:{before:function(){$(o.submit).button("loading")},success:function(e){if(e.success){$.cookie("kdaccesstoken",e.data.token,{expires:365,path:"/",domain:".kdnet.net"});if(n)try{i(e.data.token,decodeURIComponent(n))}catch(t){i(e.data.token,n)}else window.location.href="http://www.kdnet.net/"}else{if(l++,3==l&&$CONFIG.geevalidate(function(){l=0}),10021==e.code||10022==e.code){if($(".login-pwd .explain").length>0&&$(".login-pwd .explain").remove(),10021==e.code)var a='<div class="explain"><s class="fa fa-lock"></s><p>'+e.message+"</p></div>";else if(10022==e.code){if(location.search)var s=location.search;else var s="";var a='<div class="explain mustshow"><s class="fa fa-exclamation-circle text-danger"></s><p class="text-danger">密码正确，但此账号还未验证手机，根据《中华人民共和国网络安全法》要求，必须先<a class="text-primary" href="/account/bind'+s+'">绑定手机</a>。</p></div>'}$(".login-pwd").append(a)}else layer.msg(e.message);$(".cutover_code").click(),$(o.submit).button("reset")}}}})}}),$("#formRegister").validate({rules:{inputEmailPhone:{required:!0,mobile:!0,minlength:2,remote:{url:d+"i.kdnet.net/api/passport/query",jsonp:"kpjkey",dataType:"jsonp",data:{id:function(){return $("#inputEmailPhone").val()}},before:function(){$(".j-verify-btn").html('<i class="fa fa-spinner fa-spin"></i>号码验证中…').prop("disabled",!0)},response:function(e){e.success?(c=!0,$CONFIG.geevalidate(),$(".j-verify-btn").html("发送验证码").prop("disabled",!1),o.removeVoiceUpgo($("#inputEmailPhone").val())):(c=!1,$(".j-verify-btn").html("请先验证手机").prop("disabled",!0),o.removeVoiceUpgo())}}},inputAuthcode:{required:!0,minlength:4,remote:{url:d+"i.kdnet.net/api/passport/examine",dataType:"jsonp",jsonp:"kpjkey",data:{id:function(){return $("#inputEmailPhone").val()},token:function(){return _idToken},txt:function(){return $("#inputAuthcode").val()}},response:function(e){$CONFIG.LOGININIT._Token=e.message?e.data.token:null}}},inputNickname:{required:!0,minlength:4,nickCheck:!0,remote:{url:d+"i.kdnet.net/api/passport/query",dataType:"jsonp",jsonp:"kpjkey",data:{id:function(){return $("#inputNickname").val()}},response:function(e){c=e.success?!0:!1}}},inputPassword:{required:!0,minlength:8,pwdCheck:!0}},errorPlacement:function(e,n){var t=($(n).parent(),$(n).parent().find("i"));$(n).after(e),t.show().removeClass("fa fa-check-circle form-control-feedback").addClass("fa fa-times-circle form-control-feedback"),"inputPassword"==$(n).attr("id")&&$("#level").hide(),"inputEmailPhone"==$(n).attr("id")&&o.removeVoiceUpgo()},success:function(e,n){var t=($(n).parent(),$(n).parent().find("i"));t.show().removeClass("fa fa-times-circle form-control-feedback").addClass("fa fa-check-circle form-control-feedback"),"inputPassword"==$(n).attr("id")&&$("#level").show()},submitHandler:function(e){var i="",a="",s=$("#inputEmailPhone"),r=$("#inputNickname"),c=$("#inputPassword");o.reg.mobile.test(s.val())?a=s.val():o.reg.email.test(s.val())&&(i=s.val());var l={username:r.val(),passwd:t(c.val()),email:i,mobile:a,token:$CONFIG.LOGININIT._Token,phrase:"",from:"passport",redirect:n};$.KDApi({dataType:"jsonp",jsonp:"kpjkey",url:d+"i.kdnet.net/api/passport/register",data:l,content:{before:function(){$(e.submit).button("loading")},success:function(t){t.success?($.cookie("kdaccesstoken",t.data.token,{expires:365,path:"/",domain:".kdnet.net"}),setTimeout(function(){if(n)try{window.location.href=decodeURIComponent(n)}catch(e){window.location.href=n}else window.location.href="http://www.kdnet.net/"},500)):(layer.msg(t.message),$CONFIG.sendVerifyCode(!1),$(e.submit).button("reset"))}}})},messages:{inputEmailPhone:{required:"请输入中国大陆手机",mobile:"请填写正确的手机号",remote:"帐号已经存在"},inputAuthcode:{required:"请输入验证码"},inputNickname:{required:"请输入凯迪昵称",minlength:"请填写4到16位字符",nickCheck:"请填写正确的昵称格式"},inputPassword:{minlength:"请输入8-20位密码",pwdCheck:"大写字母、小写字母、数字和标点符号至少包含2种"}}}),$(".formLogin").on("click",function(){$(".sweep-ioinc").show()}),$(".formRegister").on("click",function(){$(".sweep-ioinc").hide(),$(".sweep-box").is(":hidden")||($(".sweep-ioinc .table-img").hide().eq(0).show(),$(".sweep-box").hide(),$(".kdnet-login .tab-content").show(),clearInterval(u))}),"#formRegister"==location.hash&&$(".sweep-ioinc").hide();var p,u,f=300,m=!0,h="http://opapi.kdnet.net";$(".sweep-ioinc .table-img").click(function(){var e=$(this).index();$(this).hide().siblings().show(),0==e?($(".sweep-box").show(),$(".kdnet-login .tab-content").hide(),s()):1==e&&($(".sweep-box").hide(),$(".kdnet-login .tab-content").show(),clearInterval(u))}),$(".sweep-box .pic").hover(function(){m&&$(".sweep-box .pic img").fadeOut(f).eq(1).fadeIn(f)},function(){m&&$(".sweep-box .pic img").fadeOut(f).eq(0).fadeIn(f)}),$(".sweep-box .error .btn").on("click",function(){$(".sweep-box .error-con").hide(),m=!0,s()}),$(".sweep-box .back").on("click",function(){a()})}});
;define("login:static/util/password.validate.js",function(e,i){e("common:static/util/kdnet.api.js");var n=(e("common:static/util/sprintf.js").sprintf,e("login:static/util/global.validate.js").init);i.init=function(i,a){_idToken=null;var t=n.bdhmProtocol;if(n.keyUpVali("#formPassword01","#inputEmailPhone"),n.foucsdeletesign(".form-control"),$.validator.setDefaults({onkeyup:!1,focusCleanup:!0,errorPlacement:function(e,i){var a=$(i).parent(),t=a.find("i");$(i).after(e),t.show().removeClass("fa fa-check-circle form-control-feedback").addClass("fa fa-times-circle form-control-feedback"),"inputEmailPhone"==$(i).attr("id")&&n.removeVoiceUpgo()},success:function(e,i){var n=$(i).parent(),a=n.find("i");a.show().removeClass("fa fa-times-circle form-control-feedback").addClass("fa fa-check-circle form-control-feedback")}}),$.extend($.validator.messages,{required:"此项必须填写",equalTo:"两次输入的密码不一致",minlength:$.validator.format("最少{0}个字符"),emailmobile:"请填写手机号码"}),"resetpassword"==a&&$("#formPassword01").validate({rules:{inputEmailPhone:{required:!0,emailmobile:!0,remote:{url:t+"i.kdnet.net/api/passport/has",jsonp:"kpjkey",dataType:"jsonp",data:{id:function(){return $("#inputEmailPhone").val()}},before:function(){$(".j-verify-btn").html('<i class="fa fa-spinner fa-spin"></i> 手机号码验证中…').prop("disabled",!0)},response:function(e){e.success?(IDIsPass=!0,$CONFIG.geevalidate(),$(".j-verify-btn").html("获取验证码").prop("disabled",!1),n.removeVoiceUpgo($("#inputEmailPhone").val())):(IDIsPass=!1,$(".j-verify-btn").html("请先验证手机/邮箱").prop("disabled",!0),n.removeVoiceUpgo())}}},inputAuthcode:{required:!0,minlength:4,remote:{url:t+i.examine.uri,dataType:"jsonp",jsonp:"kpjkey",data:{id:function(){return $("#inputEmailPhone").val()},token:function(){return _idToken},txt:function(){return $("#inputAuthcode").val()}},response:function(e){$CONFIG.LOGININIT._Token=e.success?e.data.token:null}}}},submitHandler:function(e){if($CONFIG.LOGININIT._Token){var i='<input type="hidden" name="examineToken" value="'+$CONFIG.LOGININIT._Token+'"><input type="hidden" name="inputEmailPhone" value="'+$("#inputEmailPhone").val()+'">';$(e).append(i),e.submit()}else layer.msg("验证码不正确")},messages:{inputEmailPhone:{required:"请输入常用邮箱或中国大陆手机",emailmobile:"请填写正确的手机号或邮箱地址"},inputAuthcode:{required:"请输入验证码"}}}),"resetpassword2"==a){var o=e("common:static/util/md5.js").md5;n.pwStrength("#formPassword02","#inputPassword",!0),$("#formPassword02").validate({rules:{inputPassword:{required:!0,minlength:8,pwdCheck:!0},confirmPassword:{required:!0,minlength:8,equalTo:"#inputPassword"}},submitHandler:function(e){$.KDApi({type:"POST",url:t+i.reset.uri,data:{passwd:o($("#inputPassword").val()),id:$("#id").val(),token:$("#examineToken").val()},content:{success:function(i){i.success?e.submit():layer.msg(i.message)}}})},messages:{inputPassword:{minlength:"请输入8-20位密码",pwdCheck:"大写字母、小写字母、数字和标点符号至少包含2种"},confirmPassword:{minlength:"请输入8-20位密码"}}})}}});
;define("login:static/util/quick.login.js",function(e){e("common:static/util/kdnet.api.js");var a=e("common:static/util/md5.js").md5;$(function(){var e=parent.layer.getFrameIndex(window.name);$.validator.setDefaults({onkeyup:!1,focusCleanup:!0}),$.extend($.validator.messages,{required:"此项必须填写",equalTo:"两次密码不一致",minlength:$.validator.format("最少{0}个字符"),emailmobile:"请输入有效的邮箱/手机号码"}),$('a[action-type="submit"]').click(function(){$(this).parents("form").submit()});var o="https:"==document.location.protocol?"https://":"http://";$("#formLogin").validate({rules:{EmailPhoneNcke:{required:!0},Password:{required:!0}},errorPlacement:function(e,a){var o=$(a).parent(),t=($(a).parent().find("input"),$(a).parent().find("i"));o.removeClass("has-success has-feedback").addClass("has-error has-feedback"),t.removeClass("fa fa-check-circle form-control-feedback").addClass("fa fa-times-circle form-control-feedback")},success:function(e,a){var o=$(a).parent(),t=($(a).parent().find("input"),$(a).parent().find("i"));o.removeClass("has-error has-feedback").addClass("has-success has-feedback"),t.removeClass("fa fa-times-circle form-control-feedback").addClass("fa fa-check-circle form-control-feedback")},submitHandler:function(t){var s={username:$("#EmailPhoneNcke").val(),passwd:a($("#Password").val())};$.KDApi({dataType:"jsonp",jsonp:"kpjkey",url:o+"i.kdnet.net/api/passport/authorize",data:s,content:{before:function(){$(t.submit).button("loading"),$("#formLogin .help-block").hide()},success:function(a){if(a.success)$.cookie("kdaccesstoken",a.data.token,{expires:365,path:"/",domain:".kdnet.net"}),parent.location.reload(),parent.layer.close(e);else{if(10021==a.code||10022==a.code){if(10021==a.code)var o=a.message;else if(10022==a.code){if(location.search)var s=location.search;else var s="";parent.location.href="/account/bind"+s}}else var o=a.message;setTimeout(function(){$("#formLogin .help-txt").html(o),$("#formLogin .help-block").show(),$(t.submit).button("reset")},1e3)}}}})}})})});